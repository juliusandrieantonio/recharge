import{a as M,b as I,c as U,e as O,g as B}from"./chunk-YPKL42CP.js";import{a as w,b as G,c as j,d as A}from"./chunk-T7YOGHYV.js";import{d as S}from"./chunk-YLQEISCQ.js";import{$ as g,Ba as r,Bb as h,Ca as y,Oc as D,Pc as E,Qc as L,Rc as z,Sc as C,Ua as f,Uc as F,W as x,ab as t,bb as e,cb as s,da as _,g as b,pd as R,td as k,ud as P,wb as i,xb as v,yb as m}from"./chunk-KD3HKJA5.js";var u=class l{constructor(o){this.db=o}getUtilization(o){return new b(n=>{let a=P(this.db,`utilizations/${o}`);k(a,H=>{let p=H.val();if(console.log(p),!p){n.next({bottle_used:0,total_bottles_collected:0,armchair_conversion:0,funds_conversion:0});return}let N=Object.values(p).reduce((d,c)=>(d.bottle_used+=c.bottle_used||0,d.total_bottles_collected+=c.total_bottles_collected||0,d.armchair_conversion+=c.armchair_conversion||0,d.funds_conversion+=c.funds_conversion||0,d),{bottle_used:0,total_bottles_collected:0,armchair_conversion:0,funds_conversion:0});n.next(N)})})}static \u0275fac=function(n){return new(n||l)(g(R))};static \u0275prov=x({token:l,factory:l.\u0275fac,providedIn:"root"})};var T=class l{constructor(o){this.recyclingService=o}data={bottle_used:0,armchair_conversion:0,funds_conversion:0,total_bottles_collected:0};ngOnInit(){this.recyclingService.getUtilization(S()).subscribe(o=>{console.log(o),this.data=o})}getArmChairs(o,n){return Math.floor(o/n)}static \u0275fac=function(n){return new(n||l)(y(u))};static \u0275cmp=_({type:l,selectors:[["app-utilization"]],standalone:!0,features:[h],decls:55,vars:8,consts:[["fxFlexFill","","fxLayout","column",1,"padding-14"],[1,"horizontal-padding","padding-bottom-14"],["fxFlex","","fxLayout.xs","column","fxLayout.gt-xs","row","fxLayoutGap","24"],["fxFlex","","appearance","outlined"],[1,"background-color","padding-bottom-14"],["fxLayout","column","fxLayoutGap","24",1,"padding-top-14"],["fxFlex","","fxLayout.xs","column","fxLayout.gt-xs","row","fxLayoutGap","34"],["fxFlex","","fxLayout","column","fxLayoutGap","14"],[1,"green-color"],["mode","determinate",3,"value"],["fxFlex","","fxLayoutAlign","end",1,"secondary-text"],["fxLayout","column","fxLayoutGap","14",1,"green-background","padding-14"],[1,"margin-top-12"],[1,"secondary-text",2,"text-align","start"]],template:function(n,a){n&1&&(t(0,"div",0)(1,"mat-card",1)(2,"h3"),i(3,"Platic Bottle Utilization"),e(),t(4,"div",2)(5,"mat-card",3)(6,"mat-card-header",4)(7,"mat-card-title"),i(8,"Option A: School Furniture"),e()(),s(9,"mat-divider"),t(10,"mat-card-content",5)(11,"div",6)(12,"div",7)(13,"span"),i(14,"Bottles Used"),e(),t(15,"strong"),i(16),e()(),t(17,"div",7)(18,"span"),i(19,"Outcome"),e(),t(20,"strong",8),i(21),e()()(),s(22,"mat-progress-bar",9),t(23,"span",10),i(24),e(),t(25,"div",11)(26,"h4",12),i(27,"Environmental Impact"),e(),t(28,"span",13),i(29," Converting 5,000 bottles into 50 armchairs reduces approximately 100kg of plastic waste and provides sustainable furniture for the school. "),e()()()(),t(30,"mat-card",3)(31,"mat-card-header",4)(32,"mat-card-title"),i(33,"Option B: Sell for Funds"),e()(),s(34,"mat-divider"),t(35,"mat-card-content",5)(36,"div",6)(37,"div",7)(38,"span"),i(39,"Bottles Used"),e(),t(40,"strong"),i(41),e()(),t(42,"div",7)(43,"span"),i(44,"Outcome"),e(),t(45,"strong",8),i(46),e()()(),s(47,"mat-progress-bar",9),t(48,"span",10),i(49),e(),t(50,"div",11)(51,"h4",12),i(52,"Financial Impact"),e(),t(53,"span",13),i(54," Selling 7,340 bottles generated \u20B118,350 which can be used to fund maintenance of the EcoCharge machines and other sustainability initiatives. "),e()()()()()()()),n&2&&(r(16),v(a.data.bottle_used),r(5),m("",a.getArmChairs(a.data.bottle_used,a.data.armchair_conversion)," armchairs"),r(),f("value",a.data.bottle_used/a.data.total_bottles_collected*100),r(2),m("",a.data.bottle_used/a.data.total_bottles_collected*100,"% of total collection"),r(17),v(a.data.bottle_used),r(5),m("\u20B1",a.data.bottle_used/a.data.funds_conversion," Generated"),r(),f("value",a.data.bottle_used/a.data.total_bottles_collected*100),r(2),m("",a.data.bottle_used/a.data.total_bottles_collected*100,"% of total collection"))},dependencies:[F,C,z,L,D,E,B,M,U,O,I,A,j,G,w],styles:["[_nghost-%COMP%]{height:100%}"]})};export{T as UtilizationComponent};
